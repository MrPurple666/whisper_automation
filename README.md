# YouTube Video to Short Converter with Subtitles

This Python script automates the process of creating a short, vertical video with subtitles from a YouTube video. It downloads the video, cuts it to a specified duration, generates subtitles using speech recognition, and combines everything into a final output.

The project simplifies the creation of short-form content from existing YouTube videos, making it easier for content creators to repurpose their material for platforms like TikTok, Instagram Reels, or YouTube Shorts. It leverages several powerful libraries and tools to handle video processing, speech recognition, and subtitle generation.

## Repository Structure

- `createvid.py`: The main Python script that contains all the functionality for video processing and subtitle generation.
- `README.md`: This file, providing documentation for the project.

## Usage Instructions

### Installation

1. Ensure you have Python 3.7 or higher installed.
2. Install the required dependencies:

```bash
pip install yt-dlp whisper ffmpeg-python
```

3. Install FFmpeg on your system if it's not already present:
   - On Ubuntu or Debian: `sudo apt-get install ffmpeg`
   - On macOS with Homebrew: `brew install ffmpeg`
   - On Windows, download from the official FFmpeg website and add it to your system PATH.

### Getting Started

1. Run the script:

```bash
python createvid.py
```

2. When prompted, enter the YouTube video URL.
3. Specify the start and end times for the video clip in the format HH:MM:SS.
4. The script will process the video and generate the final output with subtitles.

### Configuration Options

The script uses default settings for video processing and subtitle generation. You can modify these in the `createvid.py` file:

- Change the Whisper model in the `generate_subtitles()` function (default is "medium").
- Adjust video encoding parameters in the `cut_video()` and `add_subtitles()` functions.

### Common Use Cases

1. Creating a vertical short video from a landscape YouTube video:

```python
video_url = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
start_time = "00:00:30"
end_time = "00:01:00"

# The script will prompt for these inputs when run
```

2. Generating subtitles for a video clip:

```python
subtitles_path = generate_subtitles("short_video.mp4", model="medium")
```

### Troubleshooting

1. Issue: FFmpeg command fails
   - Error message: `FileNotFoundError: [Errno 2] No such file or directory: 'ffmpeg'`
   - Solution: Ensure FFmpeg is installed and added to your system PATH.

2. Issue: YouTube video download fails
   - Error message: `yt_dlp.utils.DownloadError: ERROR: Video unavailable`
   - Solution: Check if the video is publicly available and the URL is correct.

3. Issue: Subtitle generation takes too long
   - Description: The Whisper model processing time is excessive.
   - Solution: Try using a smaller Whisper model (e.g., "small" instead of "medium") in the `generate_subtitles()` function.

### Debugging

To enable verbose logging for yt-dlp:

```python
ydl_opts = {
    'format': 'mp4',
    'outtmpl': output_path,
    'verbose': True
}
```

FFmpeg debug output can be enabled by adding the `-v debug` flag to the FFmpeg commands in the `cut_video()` and `add_subtitles()` functions.

Log files are not explicitly generated by this script. Consider adding logging statements using Python's `logging` module for more detailed debugging information.

## Data Flow

The data flow in this application follows these steps:

1. User input: YouTube URL and time range
2. Video download: yt-dlp fetches the video
3. Video processing: FFmpeg cuts and resizes the video
4. Audio extraction: Whisper processes the audio for transcription
5. Subtitle generation: Whisper creates subtitles in SRT format
6. Final composition: FFmpeg combines the processed video with subtitles

```
[User Input] -> [yt-dlp] -> [FFmpeg (cut)] -> [Whisper] -> [SRT Generation] -> [FFmpeg (subtitles)] -> [Final Video]
```

Note: The Whisper model requires significant computational resources, especially for longer videos or when using larger models.